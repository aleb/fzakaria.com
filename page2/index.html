<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Page 2 of 4 for Farid Zakaria‚Äôs Blog | I‚Äôm a software engineer, father and wishful amateur surfer. If you‚Äôve come seeking my political views; you‚Äôve found the wrong Fareed.</title>
<meta name="generator" content="Jekyll v4.0.0" />
<meta property="og:title" content="Farid Zakaria‚Äôs Blog" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="I‚Äôm a software engineer, father and wishful amateur surfer. If you‚Äôve come seeking my political views; you‚Äôve found the wrong Fareed." />
<meta property="og:description" content="I‚Äôm a software engineer, father and wishful amateur surfer. If you‚Äôve come seeking my political views; you‚Äôve found the wrong Fareed." />
<link rel="canonical" href="https://fzakaria.com/page2/" />
<meta property="og:url" content="https://fzakaria.com/page2/" />
<meta property="og:site_name" content="Farid Zakaria‚Äôs Blog" />
<link rel="prev" href="https://fzakaria.com/" />
<link rel="next" href="https://fzakaria.com/page3" />
<script type="application/ld+json">
{"url":"https://fzakaria.com/page2/","headline":"Farid Zakaria‚Äôs Blog","@type":"WebPage","description":"I‚Äôm a software engineer, father and wishful amateur surfer. If you‚Äôve come seeking my political views; you‚Äôve found the wrong Fareed.","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

        <link type="application/atom+xml" rel="alternate" href="https://fzakaria.com/feed.xml" title="Farid Zakaria's Blog" />
        <link rel="stylesheet" type="text/css" href="/assets/css/base.css">
        <link rel="icon" type="image/x-icon" href="/assets/images/avatar.ico">
        <link rel="alternate" type="application/atom+xml" title="Farid Zakaria's Blog" href="/feed.xml">

        <link ref="">

        
        

        
            <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-35360900-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-35360900-1');
</script>

        

    </head>
    <body>
        

        <div class="container">
            <h1 class="page-title">
    <a class="rss pull-right" href="/feed.xml"><i class="fa fa-rss"></i></a>
    Farid Zakaria's Blog
</h1>

<div class="content">
    
    <p class="date">
        
        on <a href="/">Farid Zakaria's Blog</a>
        <span class="hidden-xs">
          &mdash;
          <a href="/page2/">
            Permalink
          </a>
        </span>
    </p>
    
    <article>
      <div class="media">
	
		<div class="post-stub">
    <h2>
      <span class="date hidden-xs">
        2020-11-12
      </span>
      <span class="title">
        
        <a href="/2020/11/12/debugging-a-jnr-ffi-bug-in-nix.html">Debugging a JNR-FFI bug in Nix</a>
        
      </span>
    </h2>
    
    <blockquote>
  <p>This is a write-up of an issue I discovered when using more advanced features of Java within a Nix environment. Please refer to the GitHub issue <a href="https://github.com/NixOS/nixpkgs/issues/103493">#103493</a> to see any ongoing process</p>
</blockquote>

<p>I have been onboarding several engineers to doing their development workflow using Nix; promising all the benefits of hermeticity &amp; reproducibility. The biggest challenge is making sure that onboarding continues to be <em>seemless</em>.</p>

<p>Therefore it‚Äôs üö® <em>all hands on deck</em> when someone has encountered a SIGSEGV; especially since the environment is within the JVM.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#</span>
<span class="c"># A fatal error has been detected by the Java Runtime Environment:</span>
<span class="c">#</span>
<span class="c">#  SIGSEGV (0xb) at pc=0x0000000000000680, pid=3229039, tid=0x00007ff8c5834640</span>
<span class="c">#</span>
<span class="c"># JRE version: OpenJDK Runtime Environment (8.0_265) (build 1.8.0_265-ga)</span>
<span class="c"># Java VM: OpenJDK 64-Bit Server VM (25.265-bga mixed mode linux-amd64 compressed oops)</span>
<span class="c"># Problematic frame:</span>
<span class="c"># C  0x0000000000000680</span>
</code></pre></div></div>


    
</div>

		<hr>
	
		<div class="post-stub">
    <h2>
      <span class="date hidden-xs">
        2020-11-10
      </span>
      <span class="title">
        
        <a href="/2020/11/10/isolation-using-java-s-classloader.html">Isolation using Java's ClassLoader</a>
        
      </span>
    </h2>
    
    <blockquote>
  <p>This is a small write-up of one I sent to my team to help disseminate some knowledge regarding Java‚Äôs ClassLoader mechanism.</p>
</blockquote>

<p>A codebase I‚Äôm working on uses Java <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/ClassLoader.html">ClassLoader</a> to help load multiple JDBC drivers with their <em>complete</em> dependencies.</p>

<p>Typically, using Maven or Gradle, a project would have to pin to common dependencies due to the diamond dependency problem at the cost of potential unforeseen bugs due to drift in versions.</p>

<p>Can we do better? Let‚Äôs dig into ClassLoaders.</p>


    
</div>

		<hr>
	
		<div class="post-stub">
    <h2>
      <span class="date hidden-xs">
        2020-10-20
      </span>
      <span class="title">
        
        <a href="/2020/10/20/nix-parallelism-import-from-derivation.html">Nix parallelism & Import From Derivation</a>
        
      </span>
    </h2>
    
    <p>I recently submitted a pull-request <a href="https://github.com/NixOS/nixpkgs/pull/101096">#101096</a> for <a href="https://github.com/NixOS/nixpkgs">nixpkgs</a> to include new functionality to list all files recursively within a directory.</p>

<p>One of the feedback from <a href="https://github.com/grahamc">@grahamc</a> &amp; <a href="https://github.com/roberth">@roberth</a> was that function may cause Nix evaluation to <em>stall</em>.</p>

<p>It was not clear why and even more confusing is the name given to this <em>gotcha</em>; <a href="https://nixos.wiki/wiki/Import_From_Derivation">Import From Derivation</a>.</p>

<blockquote>
  <p>Import From Derivation (IFD) is where during a single Nix evaluation, the Nix expression:</p>
  <ol>
    <li>creates a derivation which will build a Nix expression</li>
    <li>imports that expression</li>
    <li>uses the results of the evaluation of the expression.</li>
  </ol>
</blockquote>

<p>Let‚Äôs dig into this problem and how it‚Äôs caused.</p>


    
</div>

		<hr>
	
		<div class="post-stub">
    <h2>
      <span class="date hidden-xs">
        2020-09-28
      </span>
      <span class="title">
        
        <a href="/2020/09/28/nix-copy-closure-your-nix-shell.html">nix-copy-closure your nix-shell</a>
        
      </span>
    </h2>
    
    <blockquote>
  <p>This is a synopsis of <a href="https://github.com/NixOS/nix/issues/1985">https://github.com/NixOS/nix/issues/1985</a>. I recommend reading it for additional detail. Many thanks to contributors on the issue like <a href="https://github.com/Infinisil">Infinisil</a> for adding context.</p>
</blockquote>

<p>Someone reached out to me over e-mail to discuss my previous post on <a href="/2020/08/11/caching-your-nix-shell.html">caching your nix-shell</a>.</p>

<p><em>‚ÄúWhat I wish to do is to copy a particular development environment (nix-shell)
from A to B, so that I could run nix-shell on server B. Server B is only accessible through SSH and <strong>does not</strong> have Internet access.‚Äù</em></p>


    
</div>

		<hr>
	
		<div class="post-stub">
    <h2>
      <span class="date hidden-xs">
        2020-09-23
      </span>
      <span class="title">
        
        <a href="/2020/09/23/vpns-continued.html">VPNs continued</a>
        
      </span>
    </h2>
    
    <blockquote>
  <p>This is <em>part 2</em> of a post regarding VPNs. Please see <a href="/2020/09/20/vpns-from-first-principles.html">here</a> for part 1.</p>
</blockquote>

<p>In the <a href="/2020/09/20/vpns-from-first-principles.html">previous post</a>, we discussed the basics of setting up a virtual private network; the goal of which was bridging two distinct private subnets.</p>

<p>This gave us the alluring property of treating separate networks as they were colocated and can be accessed easily. However most people are first introduced into VPNs for other features such as: <em>anonymity</em>, <em>secrecy</em> &amp; <em>privacy</em>.</p>

<blockquote>
  <p>A common example may be to tunnel traffic through a host in another country to disguise the origin. For instance, maybe you are in Canada but want to browse the American Netflix catalog.</p>
</blockquote>

<p><em>How can we extend <a href="https://github.com/fzakaria/lametun">lametun</a> to do this?</em></p>

<p>I‚Äôll present a few alternatives. The main goal however will to forward all traffic, including ones destined for the Internet, through the tunnel.</p>


    
</div>

		<hr>
	
		<div class="post-stub">
    <h2>
      <span class="date hidden-xs">
        2020-09-20
      </span>
      <span class="title">
        
        <a href="/2020/09/20/vpns-from-first-principles.html">VPNs from first principles</a>
        
      </span>
    </h2>
    
    <blockquote>
  <p>If you enjoy the <em>from first principles</em> theme, consider reading the one
on <a href="/2020/05/31/containers-from-first-principles.html">containers</a>.</p>
</blockquote>

<p>Networking can seem like <em>voodoo</em>; many of us take for granted how data transmits from one computer to the next. Recently, <a href="https://www.wireguard.com/">wireguard</a>, has attracted a lot of publicity for it‚Äôs inclusion into the Linux kernel &amp; for it‚Äôs stated goal of making setting up VPNs simpler.</p>

<p>Behind all the magic, is a very simple premise. Let‚Äôs shed some of the complexity and break it down to <em>first principles</em>.</p>


    
</div>

		<hr>
	
		<div class="post-stub">
    <h2>
      <span class="date hidden-xs">
        2020-09-17
      </span>
      <span class="title">
        
        <a href="/2020/09/17/tailscale-is-magic-even-more-so-with-nixos.html">Tailscale is magic; even more so with NixOS</a>
        
      </span>
    </h2>
    
    <p>Our adventure into NixOS continues; this time let‚Äôs look into how we can <strong>harden</strong> our NixOS machines by putting them within a VPN. We will be using <a href="https://tailscale.com/">tailscale</a> to setup our VPN.</p>

<p>Restricting your machines; especially SSH for servers; behind a VPN is a great way to add a layer of security without having to mess with various checklists like making sure <em>password based logins</em> are disabled.</p>


    
</div>

		<hr>
	
		<div class="post-stub">
    <h2>
      <span class="date hidden-xs">
        2020-09-08
      </span>
      <span class="title">
        
        <a href="/2020/09/08/nixos-what-s-in-a-rebuild-continued.html">NixOS; what's in a rebuild? Continued.</a>
        
      </span>
    </h2>
    
    <blockquote>
  <p>This is <em>part 2</em> of a series on <strong>nixos-rebuild</strong>. You can read part 1 <a href="/2020/09/06/nixos-what-s-in-a-rebuild.html">here</a>.</p>
</blockquote>

<p>We previously broke down that one of the first tasks done by <em>nixos-rebuild</em> is to build the <em>system</em> attribute.</p>

<p>What happens next for <strong>switch</strong> ? Let‚Äôs go back to the <a href="https://github.com/NixOS/nixpkgs/blob/02590c96209d374d7f720293fcb8337e17104bc9/nixos/modules/installer/tools/nixos-rebuild.sh#L428-L429">source</a>.</p>


    
</div>

		<hr>
	
		<div class="post-stub">
    <h2>
      <span class="date hidden-xs">
        2020-09-06
      </span>
      <span class="title">
        
        <a href="/2020/09/06/nixos-what-s-in-a-rebuild.html">NixOS; what's in a rebuild?</a>
        
      </span>
    </h2>
    
    <p>I have been using Nix but mainly through <a href="https://github.com/rycee/home-manager">home-manager</a> on my Debian system; finally I made the plunge into running NixOS on an AWS server for my <em>side-projects</em>.</p>

<p>There‚Äôs a lot of information on how to configure &amp; setup an already created NixOS machine but not much advice for workflows, best practices &amp; multiple machines.</p>

<p>Here I‚Äôll document what I found useful and pulling back the veil on some of the NixOS tooling.</p>

<blockquote>
  <p>Feel free to check my Nix repository for home-manager &amp; NixOS
<a href="https://github.com/fzakaria/nix-home">https://github.com/fzakaria/nix-home</a></p>
</blockquote>


    
</div>

		<hr>
	
		<div class="post-stub">
    <h2>
      <span class="date hidden-xs">
        2020-09-04
      </span>
      <span class="title">
        
        <a href="/2020/09/04/mvn2nix-welcoming-maven-into-nix-s-warm-embrace.html">mvn2nix; welcoming Maven into Nix's warm embrace</a>
        
      </span>
    </h2>
    
    <p>I wrote <a href="/2020/07/20/packaging-a-maven-application-with-nix.html">previously</a> about the current state of affairs for Java packaging in the Nix ecosystem; including a little blurb at the end about a little project I have been working on.</p>

<p>I would like to announce a <em>beta release</em> for <a href="https://github.com/fzakaria/mvn2nix">mvn2nix</a>.</p>

<p>You find find the similar announcement on <a href="https://discourse.nixos.org/t/mvn2nix-packaging-maven-application-made-easy/8751">https://discourse.nixos.org/t/mvn2nix-packaging-maven-application-made-easy/8751</a></p>

<blockquote>
  <p>Easily package your Maven Java application with the Nix package manager.</p>
</blockquote>

<p><strong>mvn2nix</strong> is my attempt &amp; re-imagining of what a lock file type Nix Java ecosystem should look like.</p>


    
</div>

		<hr>
	

	
	    <div class="pull-left">
	        <a href="/" class="btn btn-primary">
	            <span class="icon">
	              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 192 512"><path d="M192 127.338v257.324c0 17.818-21.543 26.741-34.142 14.142L29.196 270.142c-7.81-7.81-7.81-20.474 0-28.284l128.662-128.662c12.599-12.6 34.142-3.676 34.142 14.142z"/></svg>
	            </span>
	            Page 1
	        </a>
	    </div>
	

	
    <div class="pull-right">
        <a href="/page3" class="btn btn-primary">
            Page 3
            <span class="icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 192 512"><path d="M0 384.662V127.338c0-17.818 21.543-26.741 34.142-14.142l128.662 128.662c7.81 7.81 7.81 20.474 0 28.284L34.142 398.804C21.543 411.404 0 402.48 0 384.662z"/></svg>
            </span>
        </a>
    </div>
    
</div>
<div class="clearfix"></div>
    </article>
</div>

<div class="sidebar">
    <hr class="visible-xs" />
    <img class="avatar" src="/assets/images/avatar-164.png" alt="A photo of my dog Moose" title="My dog Moose"/>
    <p>I'm a software engineer, father and wishful amateur surfer. If you've come seeking my political views; you've found the wrong <a href="https://fareedzakaria.com/">Fareed</a>.</p>
    <div class="external-links">
      <p>
        <span class="context">linkedin</span>
        <a href="https://www.linkedin.com/in/fmzakari/">fmzakari</a>
      </p>
      <p>
        <span class="context">github</span>
        <a href="https://github.com/fzakaria">fzakaria</a>
      </p>
      <p>
        <span class="context">email</span>
        <a href="mailto:farid.m.zakaria@gmail.com">farid.m.zakaria@gmail.com</a>
      </p>
      <p>
        <span class="context">pgp</span>
        <a href="/publickey.txt">D1B232E7</a>
      </p>
      <p>
        Web friendly version of my <a href="/resume/index.html">resume</a>.
      </p>
    </div>
    <h3>Projects</h3>
    <p>
      <a href="/projects/">Click here</a> for some personal
      projects I've worked on.
    </p>
    <h3>Old Blog</h3>
    <p>
      <a href="/old_blog/">Click here</a> for the archive
      of my old blog posts from Wordpress.
    </p>
    
    <h3>Recent Posts</h3>
    
    <div class="post-stub">
      2021-08-12<br />
      <a href="/2021/08/12/a-nix-binary-cache-specification.html">A Nix Binary Cache Specification</a>
    </div>
    
    <div class="post-stub">
      2021-08-10<br />
      <a href="/2021/08/10/investigating-hydration-times-with-nix.html">Investigating hydration times with Nix</a>
    </div>
    
    <div class="post-stub">
      2021-08-05<br />
      <a href="/2021/08/05/the-search-for-a-minimal-nix-shell-continued-mkshellminimal.html">The search for a minimal nix-shell continued; mkShellMinimal</a>
    </div>
    
    
    <h3>License</h3>
    <p style="font-size: 10pt">
    The content for this site is
    <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>.
    The <a href="https://github.com/SirCmpwn/ddjekyll">inspiration for the theme</a> for this site is
    ¬© Drew Devault.
    </p>
    <div class="spacer" style="margin-top: 30px;"></div>
    
    <p><a href="https://github.com/fzakaria/fzakaria.com/edit/master/page2/index.html">
      Improve this page @ bab8cd6
    </a></p>

</div>
        </div>
    </body>
</html>
